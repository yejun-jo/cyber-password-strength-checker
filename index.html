<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ë¹„ë°€ë²ˆí˜¸ ë³´ì•ˆ ë“±ê¸‰ ì¸¡ì •ê¸°</title>
  <style>
    /* ì „ì²´ ë°°ê²½: ì–´ë‘ìš´ ì‚¬ì´ë²„ ëŠë‚Œ + ì¤‘ì•™ ì •ë ¬ */
    body {
      margin: 0;
      min-height: 100vh;
      font-family: sans-serif;
      background: radial-gradient(circle at top, #1f2937, #020617);
      color: #f9fafb;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 40px 16px;
      overflow-x: hidden;
    }

    /* ì¤‘ì•™ ì¹´ë“œí˜• ì»¨í…Œì´ë„ˆ */
    .container {
      width: 100%;
      max-width: 480px;
      background: rgba(15, 23, 42, 0.9);
      border-radius: 16px;
      padding: 24px 20px 28px;
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(10px);
      position: relative;
      z-index: 1;
    }

    /* ë°°ê²½ ì¥ì‹ìš© ì½”ë“œ ë¹„ */
    .background-decor {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
    }

    .code-rain {
      position: absolute;
      font-family: monospace;
      font-size: 14px;
      color: rgba(148, 163, 184, 0.15);
      writing-mode: vertical-rl;
      animation: rain 8s linear infinite;
    }

    .code-rain-1 {
      left: 10%;
      top: -150px;
    }

    .code-rain-2 {
      right: 15%;
      top: -200px;
      animation-duration: 11s;
      animation-delay: -3s;
    }

    @keyframes rain {
      0%   { transform: translateY(-100px); }
      100% { transform: translateY(120vh); }
    }

    /* ë– ë‹¤ë‹ˆëŠ” ìë¬¼ì‡  ì•„ì´ì½˜ */
    .floating-lock {
      position: fixed;
      right: 24px;
      top: 24px;
      font-size: 32px;
      opacity: 0.35;
      animation: float 3s ease-in-out infinite alternate;
      z-index: 2;
    }

    @keyframes float {
      0%   { transform: translateY(0); }
      100% { transform: translateY(8px); }
    }

    /* ì œëª© + ê¹œë¹¡ì´ëŠ” ì»¤ì„œ */
    h2 {
      margin: 0 0 8px 0;
      font-size: 22px;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .cursor {
      font-weight: 300;
      animation: blink 1s step-end infinite;
    }

    @keyframes blink {
      0%, 50%  { opacity: 1; }
      51%,100% { opacity: 0; }
    }

    .bar-wrapper {
      width: 100%;
      height: 20px;
      background: #020617;
      border-radius: 10px;
      overflow: hidden;
      margin-top: 8px;
      box-shadow: 0 0 16px rgba(59, 130, 246, 0.45); /* ë„¤ì˜¨ ëŠë‚Œ */
    }

    .bar {
      height: 100%;
      width: 0%;
      transition: width 0.3s, background 0.3s, box-shadow 0.3s;
    }

    .info { margin-top: 10px; font-weight: bold; }
    small { color: #9ca3af; }
    .pw-row { display: flex; gap: 8px; margin-top: 12px; }
    .pw-row input { flex: 1; }

    .toggle-btn {
      padding: 8px 10px;
      border: 1px solid #4b5563;
      border-radius: 6px;
      background: #111827;
      cursor: pointer;
      font-size: 12px;
      color: #e5e7eb;
    }

    .toggle-btn:hover {
      background: #1f2937;
    }

    /* â˜… 100ì ì¼ ë•Œ ë¬´ì§€ê°œ + ë°˜ì§ì„ íš¨ê³¼ */
    .bar.rainbow {
      background: linear-gradient(
        90deg,
        #ff0000,
        #ff7f00,
        #ffff00,
        #00ff00,
        #00ffff,
        #0000ff,
        #8b00ff,
        #ff0000,
        #ff7f00,
        #ffff00	
      );
      background-size: 400% 100%;
      animation: rainbowMove 1s linear infinite, glow 1.2s ease-in-out infinite alternate;
    }

    @keyframes rainbowMove {
      0% { background-position: 0% 50%; }
      100% { background-position: 100% 50%; }
    }

    @keyframes glow {
      0% { box-shadow: 0 0 4px rgba(59, 130, 246, 0.4); }
      100% { box-shadow: 0 0 16px rgba(59, 130, 246, 0.9); }
    }

    #detail {
      margin-top: 6px;
      font-size: 13px;
      color: #cbd5f5;
    }
  </style>
</head>
<body>
  <!-- ë°°ê²½ ì¥ì‹ -->
  <div class="background-decor">
    <div class="code-rain code-rain-1">0101011010010110100101</div>
    <div class="code-rain code-rain-2">1100100101011001010101</div>
  </div>

  <!-- ë– ë‹¤ë‹ˆëŠ” ìë¬¼ì‡  -->
  <div class="floating-lock">ğŸ”’</div>

  <!-- ë©”ì¸ ì¹´ë“œ -->
  <div class="container">
    <h2>ë¹„ë°€ë²ˆí˜¸ ë³´ì•ˆë„ ì¸¡ì •ê¸°</h2>
    <p>
      <small>
        â€» ì‹¤ì œ ë¹„ë°€ë²ˆí˜¸ ë§ê³ , ë¹„ìŠ·í•œ <b>ì˜ˆì‹œ ë¹„ë°€ë²ˆí˜¸</b>ë¥¼ ë„£ì–´ ë³´ì„¸ìš”.<br>
        â€» ì´ ë„êµ¬ëŠ” <b>ìµœëŒ€ 12ì</b>ê¹Œì§€ë§Œ ê²€ì‚¬í•©ë‹ˆë‹¤.<br>
      </small>
    </p>

    <div class="pw-row">
      <input
        id="pw"
        type="password"
        placeholder="ì˜ˆì‹œ ë¹„ë°€ë²ˆí˜¸ (ìµœëŒ€ 12ì)"
        maxlength="12"
      />
      <button type="button" id="togglePw" class="toggle-btn">ë³´ê¸°</button>
    </div>
    
    <div class="bar-wrapper">
      <div id="bar" class="bar"></div>
    </div>
    <div id="scoreText" class="info"></div>
    <div id="detail"></div>
  </div>

  <script>
    const pwInput = document.getElementById('pw');
    const bar = document.getElementById('bar');
    const scoreText = document.getElementById('scoreText');
    const detail = document.getElementById('detail');
    const toggleBtn = document.getElementById('togglePw');

    // ë¹„ë°€ë²ˆí˜¸ ë³´ê¸°/ìˆ¨ê¸°ê¸° ë²„íŠ¼
    toggleBtn.addEventListener('click', () => {
      if (pwInput.type === 'password') {
        pwInput.type = 'text';
        toggleBtn.textContent = 'ìˆ¨ê¸°ê¸°';
      } else {
        pwInput.type = 'password';
        toggleBtn.textContent = 'ë³´ê¸°';
      }
    });

    pwInput.addEventListener('input', () => {
      const pw = pwInput.value;
      const score = calcScore(pw);
      updateUI(score, pw);
    });

    function calcScore(pw) {
      if (!pw) return 0;
      let score = 0;
      const len = pw.length;

      // ëŒ€ë¬¸ì/íŠ¹ìˆ˜ë¬¸ì ê°œìˆ˜ ê³„ì‚°
      const upperMatches = pw.match(/[A-Z]/g) || [];
      const specialMatches = pw.match(/[^a-zA-Z0-9]/g) || [];
      const upperCount = upperMatches.length;
      const specialCount = specialMatches.length;

      // ë¬¸ì ì¢…ë¥˜ ì²´í¬
      let typeCount = 0;
      if (/[a-z]/.test(pw)) typeCount++;
      if (upperCount > 0) typeCount++;
      if (/[0-9]/.test(pw)) typeCount++;
      if (specialCount > 0) typeCount++;

      // 1) ê¸¸ì´ ì ìˆ˜ (ìµœëŒ€ 50ì , 12ìì—ì„œ í’€ìŠ¤ì½”ì–´)
      if (len >= 12) score += 50;
      else if (len === 11) score += 40;
      else if (len === 10) score += 35;
      else if (len >= 8) score += 25;
      else if (len >= 6) score += 10;
      // 5ì ì´í•˜ëŠ” 0ì 

      // 2) ë¬¸ì ì¢…ë¥˜ ì ìˆ˜ (ìµœëŒ€ 48ì )
      if (/[a-z]/.test(pw)) score += 12;
      if (upperCount > 0) score += 12;
      if (/[0-9]/.test(pw)) score += 12;
      if (specialCount > 0) score += 12;

      // 3) ê¸°ë³¸ ë³´ë„ˆìŠ¤ (ë‚œì´ë„ ì¡°ì ˆìš©)
      if (len >= 10 && typeCount >= 3) {
        score += 5;
      }

      // 4) ìœ„í—˜ íŒ¨í„´ ê°ì 
      const lower = pw.toLowerCase();
      const commonPatterns = ["1234", "abcd", "qwerty", "password", "admin"];
      for (const p of commonPatterns) {
        if (lower.includes(p)) {
          score -= 25;
          break;
        }
      }

      // ê°™ì€ ë¬¸ì 4ë²ˆ ì´ìƒ ë°˜ë³µ
      if (/^(.)\1{3,}$/.test(pw)) {
        score -= 15;
      }

      // ë„ˆë¬´ ì§§ì€ ë¹„ë°€ë²ˆí˜¸ ì¶”ê°€ ê°ì 
      if (len <= 6) {
        score -= 10;
      }

      // ê¸°ë³¸ ì ìˆ˜ ë²”ìœ„ ì œí•œ
      if (score < 0) score = 0;
      if (score > 100) score = 100;

      // â˜… 100ì  ì¡°ê±´ ê°•ì œ ì ìš© â˜…
      // ëª¨ë“  ê¸€ì ì„œë¡œ ë‹¬ë¼ì•¼ í•¨
      const allUnique = new Set(pw).size === pw.length;

      // ê¸¸ì´ 12, ë¬¸ì ì¢…ë¥˜ 4ê°€ì§€, ëŒ€ë¬¸ì 2ê°œ ì´ìƒ, íŠ¹ìˆ˜ê¸°í˜¸ 2ê°œ ì´ìƒ, ì „ë¶€ ë‹¤ë¥¸ ê¸€ìì¼ ë•Œë§Œ 100ì  ìœ ì§€
      const perfectCondition =
        len === 12 &&
        typeCount === 4 &&
        upperCount >= 2 &&
        specialCount >= 2 &&
        allUnique;

      if (score === 100 && !perfectCondition) {
        // ì¡°ê±´ì„ ì¶©ì¡±í•˜ì§€ ëª»í•˜ë©´ 100ì  ëŒ€ì‹  99ì ìœ¼ë¡œ ì œí•œ
        score = 99;
      }

      return Math.round(score);
    }

    function updateUI(score, pw) {
      bar.style.width = score + "%";
      bar.classList.remove("rainbow"); // í•­ìƒ ë¨¼ì € ë¬´ì§€ê°œ íš¨ê³¼ ì œê±°

      let color = "#ef4444"; // ê¸°ë³¸ ë¹¨ê°„
      let label = "ìœ„í—˜";
      let msg = "ì•„ì£¼ ì•½í•œ ë¹„ë°€ë²ˆí˜¸ì…ë‹ˆë‹¤. ê¸¸ì´ì™€ ë¬¸ì ì¢…ë¥˜ë¥¼ ëŠ˜ë ¤ ë³´ì„¸ìš”.";

      if (score === 100) {
        color = "#1d4ed8"; // (ë¬´ì§€ê°œê°€ ë®ì–´ì“°ì§€ë§Œ ê¸°ë³¸ê°’ì€ ìœ ì§€)
        label = "ì „ì„¤ì˜ ë¹„ë°€ë²ˆí˜¸";
        msg = "ìµœìƒê¸‰ ë¹„ë°€ë²ˆí˜¸ì…ë‹ˆë‹¤! ì—¬ëŸ¬ ê³³ì— ì¬ì‚¬ìš©ë§Œ í•˜ì§€ ë§ˆì„¸ìš”!";
      } else if (score > 80) {
        color = "#3b82f6"; // íŒŒë‘
        label = "ë§¤ìš° ì•ˆì „";
        msg = "ì•„ì£¼ ì˜ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.";
      } else if (score > 60) {
        color = "#22c55e"; // ì´ˆë¡
        label = "ì•ˆì „";
        msg = "ê½¤ ê´œì°®ìŠµë‹ˆë‹¤.";
      } else if (score > 30) {
        color = "#f97316"; // ì£¼í™©
        label = "ë³´í†µ";
        msg = "ì¡°ê¸ˆ ë” ê¸¸ê²Œ ë§Œë“¤ê³ , ëŒ€ë¬¸ì/ìˆ«ì/íŠ¹ìˆ˜ë¬¸ìë¥¼ ê³¨ê³ ë£¨ ì„ì–´ ë³´ì„¸ìš”.";
      }

      // 100ì ì¼ ë•Œë§Œ ë¬´ì§€ê°œ + íŠ¹ìˆ˜íš¨ê³¼
      if (score === 100) {
        bar.style.background = "";      // ê¸°ì¡´ ë‹¨ìƒ‰ ì¸ë¼ì¸ background ì œê±°
        bar.classList.add("rainbow");   // CSS ë¬´ì§€ê°œ íš¨ê³¼ ì ìš©
      } else {
        bar.style.background = color;   // í‰ì†Œì—” ë‹¨ìƒ‰
        bar.style.boxShadow = "none";
      }

      scoreText.textContent = `ë³´ì•ˆë„: ${score}% (${label})`;
      detail.textContent = pw 
        ? msg 
        : "ì˜ˆì‹œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ë©´ ë³´ì•ˆë„ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”. (ìµœëŒ€ 12ì)";
    }

    // ì´ˆê¸° ìƒíƒœ
    updateUI(0, "");
  </script>
</body>
</html>
